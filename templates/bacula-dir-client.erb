Client {
  Name = "<%= @myname %>"
  Address = <%= @address %>
  FDPort = <%= @port %>
  Catalog = "<%= scope['bacula::server::myname'] -%>:catalog"
  Password = "<%= @password %>"
  AutoPrune = yes
  Job Retention = 2 weeks
  File Retention = 2 weeks
}

Job {
  Name = "<%= @myname %>-backup"
  Client = <%= @myname %>
  JobDefs = "DefaultJob"
  FileSet = "<%= @myname %>-fileset"
  Write Bootstrap = "/var/spool/bacula/<%= @myname %>-fileset.bsr"
}

FileSet {
  Name = "<%= @myname %>-fileset"
  Include {
    Options {
      Signature   = <%= @signature %>
<% if @compression -%>
      Compression = <%= @compression %>
<% end -%>
    }
<% @fileset.each do |path| -%>
   File = <%= path %>
<% end -%>
  }
<% if @exclude -%>
  Exclude {
<% @exclude.each do |path| -%>
    File = <%= path %>
<% end -%>
  }
<% end -%>
}

